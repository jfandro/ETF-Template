
@{
    ViewBag.Title = "Aix tutorial";
    Layout = "~/Views/Shared/_layoutNoMenu.cshtml";
}
<link href="~/Content/mydataviz.css" rel="stylesheet" />
<style>
    .container-question {
        color: #000;
    }
</style>

@section header {
    <section class="jumbotron section-header header-image" style="background-image:url('https://www.letelegramme.fr/images/2019/03/25/oceans-un-bien-commun-de-l-humanite-a-defendre-a-l-onu_4484351_540x271p.jpg')">
        <div class="container">
            <h1 class="text-center">Aix Tutorials</h1>
        </div>
    </section>
}

<section class="section-b">
    <div class="container">
        <p>
            On this page, you will find samples focused on AIX issues
            and created to help your IT in the development of customized experiences
            using Lili's API. These samples call actions (GET and POST)
            listed on <a href="https://aix.lili.am/help" target="_blank">this web page</a>.
        </p>
    </div>
</section>

<section class="section-c">
    <div class="container">
        <h2>Historical NAVs of one ETN</h2>
        <div class="well">
            This sample #1 call Lili's API to display historical in a custom table the 20 last NAV prices
            of one given ETN (ISIN code KZX000000245).
            To build this experience, we create first an empty table with 2 colums (NAV date and NAV price)
            then we call Lili's API to populate this table by calling
            <a href="https://aix.lili.am/Help/Api/GET-api-Portfolios-Liabilities_code" target="_blank">this URL</a>.
            On this help page, you will see the definition of returned JSON object.
        </div>
        <div class="panel">
            <div class="panel-heading"><h3>Sample #1 : Historical NAV</h3></div>
            <div class="panel-body">
                <div class="table-responsive">
                    <table class="table table-bordered text-nowrap">
                        <thead>
                            <tr>
                                <td>NAV date</td>
                                <td class="text-right">NAV price</td>
                            </tr>
                        </thead>
                        <tbody id="navs"></tbody>
                    </table>
                </div>
                <em>See below HTML and scripts related to this sample.</em>
            </div>
        </div>

        <div>
            <h4>HTML</h4>
            <pre class="prettyprint">
            <xmp>
            <table class="table table-bordered text-nowrap">
            <thead>
            <tr>
            <td>NAV date</td>
            <td class="text-right">NAV price</td>
                            </tr>
                        </thead>
            <tbody id="navs"></tbody>
                    </table>
                </xmp>
            </pre>
            <h4>Java Script (JQuery)</h4>
            <pre class="prettyprint">
            <xmp>
                    var container = $('#navs');
                    $.get("https://aix.lili.am/api/portfolios/liabilities?code=KZX000000245", function (data) {
                    $.each(data, function (i, nav) {
                        // only the 20 last navs
                        if (i < 10) {
                            tr = $('<tr>').append(
                                $('<td>').text(nav.NAVDate.substring(0, 10)),
                                $('<td>').text(nav.NAVPrice).addClass('text-right')
                            );
                            tr.appendTo(container);
                    }});})
                </xmp>
            </pre>
        </div>

        <div class="well">
            <p>
                <b>IMPORTANT</b> : For this sample, the called action does not require authorizations.
                Anyone can have access to the returned data, just by opening
                <a href="https://aix.lili.am/api/portfolios/liabilities?code=KZX000000245" target="_blank">this URL</a> and
                will see all data relative to the NAVs.
            </p>
        </div>
    </div>
</section>

<section class="section-d">
    <div class="container">
        <h2>Sample #2 : NAV report of one ETN on one date</h2>
        <div class="well">
            This sample #2 is similar to the previous sample. It calls Lili's API to display the NAV statement on 30th august of one given ETN (ISIN code KZX000000252).
            If the given date is not a business day, Lili returns last statement of the previous
            business day.
            To build this experience, we create first an empty table with 2 colums (NAV date and NAV price)
            then we call Lili's API to populate this table by calling
            <a href="https://aix.lili.am/Help/Api/GET-api-Portfolios-Liability_code_valuedate" target="_blank">this URL</a>.
            The returned JSON object is the same object than the previous sample.
        </div>
        <div class="panel">
            <div class="panel-heading"><h3>NAV report</h3></div>
            <div class="panel-body">
                <div id="nav"></div>
                <em>See below HTML and scripts related to this sample.</em>
            </div>
            <div class="panel-footer">
                <a href="https://aix.lili.am/reports/ALM?id=KZX000000252&navdate=2021-08-30">Report in PDF</a>
            </div>
        </div>
        <div>
            <h4>HTML</h4>
            <pre class="prettyprint">
                <xmp>
                    <div id="nav"></div>
                </xmp>
            </pre>
            <h4>Java Script (JQuery)</h4>
            <pre class="prettyprint">
            <xmp>
                var container2 = $('#nav');
                $.get("https://aix.lili.am/api/portfolios/liability?code=KZX000000252&valuedate=2021-08-27", function (nav) {
                        ul = $('<ul>').append(
                            $('<li>').text("ISIN code " + nav.Code),
                            $('<li>').text("NAV date = " + nav.NAVDate.substring(0, 10)),
                            $('<li>').text("Gross Value = " + nav.GAV + " USD"),
                            $('<li>').text("Management fees = " + nav.CumulatedManagementFees + " USD"),
                            $('<li>').text("Cash amount = " + nav.CashAmount + " USD")
                        );
                        ul.appendTo(container2);
                });
            </xmp>
            </pre>
        </div>
        <div class="well">
            <p>
                <b>IMPORTANT</b> : For this sample, the called action does not require authorizations.
                Anyone can have access to the returned data, just by opening
                <a href="https://aix.lili.am/api/portfolios/liability?code=KZX000000252&valuedate=2021-08-30" target="_blank">this URL</a> and
                will see all data relative to the NAVs.
            </p>
        </div>
    </div>
</section>


@section scripts {
    <script>
        var container = $('#navs');
        $.get("https://aix.lili.am/api/portfolios/liabilities?code=KZX000000245", function (data) {
            $.each(data, function (i, nav) {
                // only the 20 last navs
                if (i < 10) {
                    tr = $('<tr>').append(
                        $('<td>').text(nav.NAVDate.substring(0, 10)),
                        $('<td>').text(nav.NAVPrice).addClass('text-right')
                    );
                    tr.appendTo(container);
                }
            });
        })

        var container2 = $('#nav');
        $.get("https://aix.lili.am/api/portfolios/liability?code=KZX000000252&valuedate=2021-08-27", function (nav) {
                ul = $('<ul>').append(
                    $('<li>').text("ISIN code " + nav.Code),
                    $('<li>').text("NAV date = " + nav.NAVDate.substring(0, 10)),
                    $('<li>').text("Gross Value = " + nav.GAV + " USD"),
                    $('<li>').text("Management fees = " + nav.CumulatedManagementFees + " USD"),
                    $('<li>').text("Cash amount = " + nav.CashAmount + " USD")
                );
                ul.appendTo(container2);
        });

    </script>
}
