
@{
    ViewBag.Title = "Comparateurs d'Univers";
}
<link href="~/Content/mydataviz.css" rel="stylesheet" />

@section header {
    <section class="jumbotron section-header header-image" style="background-image:url('https://i.pinimg.com/originals/ae/32/50/ae32501f76b85d2a3cc01ebdb5860385.jpg')">
        <div class="container">
            <h1 class="text-center">Comparateur d'Univers</h1>
            <p class="lead text-center">Choisir son univers avant d'investir</p>
        </div>
    </section>
}

<section class="section-b">
    <div class="container">
        <p>
            Sur cette page, nous allons afficher les univers de Lili en affichant les performances, les risques et les
            couts des meilleurs scénarios de l'allocation par défaut.
        </p>
    </div>
</section>

<section class="section-e">
    <div class="container">
        <div class="text-center">
            <p class="btn-group btn-group-xs" data-toggle="buttons">
                <label class="btn btn-primary btn-option active" data-option="0" data-toggle="tooltip" title="Le meilleur"><input type="radio" name="options">Meilleur scenario</label>
                <label class="btn btn-primary btn-option" data-option="1" data-toggle="tooltip" title="Le pire"><input type="radio" name="options">Pire scénario</label>
            </p>
        </div>
        <div style="margin-top:50px;">
            <div id="universe-bubbles" class="universes-chart row-chart chart-xs" data-x-axis="Performances" data-y-axis="Pertes max."></div>
        </div>
    </div>
</section>

<section class="container">
    <h2>Implémentation</h2>
    <pre class="prettyprint">
        <xmp>
            <!-- Latest version of d3 librairies -->
            <script src="https://lili.am/Scripts/d3/v5/d3.js" type="text/javascript"></script>
            <script src="~/Scripts/d3dc/bubble.universes-1.2.js"></script>
            <script src="~/Scripts/universesController.js"></script>

            <script>

                $(document).ready(function () {

                    // First, we create a new instance of universes controller to get data from server with LILI API
                    $u = new LoyolApp.UniverseController();
                    var $b = new universeBubbles('#universe-bubbles');

                    // Listen to change scenario
                    $('.btn-option').click(function (e) {
                        e.preventDefault();
                        scenario = parseInt($(this).data('option'));
                        $b.setOption(scenario);
                    });

                    // Call the web api to get the comparison data
                    $u.get('Comparison', null, function (data) {
                        // Then we populate the bubbles with each universe
                        $b.load(data, function () { })
                    });

                });


            </script>

        </xmp>
    </pre>
</section>

@section scripts {

    <!-- Latest version of d3 librairies -->
    <script src="https://lili.am/Scripts/d3/v5/d3.js" type="text/javascript"></script>
    <script src="~/Scripts/d3dc/bubble.universes-1.2.js"></script>
    <script src="~/Scripts/universesController.js"></script>

    <script>

        $(document).ready(function () {

            // First, we create a new instance of universes controller to get data from server with LILI API
            $u = new LoyolApp.UniverseController();
            var $b = new universeBubbles('#universe-bubbles');

            // Listen to change scenario
            $('.btn-option').click(function (e) {
                e.preventDefault();
                scenario = parseInt($(this).data('option'));
                $b.setOption(scenario);
            });

            // Call the web api to get the comparison data
            $u.get('Comparison', null, function (data) {
                // Then we populate the bubbles with each universe
                $b.load(data, function () { })
            });

        });


    </script>
}
